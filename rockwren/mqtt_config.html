<!--
SPDX-FileCopyrightText: 2023 Charles Crighton <rockwren@crighton.nz>

SPDX-License-Identifier: GPL-3.0-or-later
-->

<!DOCTYPE html>
<html>
    <head>
        <title>Rockwren</title>
        <link rel="icon" type="image/svg+xml" href="/favicon.svg"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>{{render_template(web_path + "/style.css")}}</style>
    </head>
    <body> <h1>Rockwren</h1>
        <h2>{{device.name}}</h2>
        <h2>MQTT Settings</h2>
            <form class="center" action="/mqtt_config" method="POST">
                <div class="table center">
                <div class="mqttform">
                    <label for="mqtt_server">MQTT Server:</label>
                    <input class="mqttform" type="text" id="mqtt_server" name="mqtt_server" value="{{mqtt_server}}">
                </div>
                <div class="mqttform">
                    <label for="mqtt_port">MQTT Port:</label>
                    <input class="mqttform" type="number" id="mqtt_port" name="mqtt_port" value="{{mqtt_port}}" min="0" max="65536">
                </div>
                <div class="mqttform">
                    <label for="mqtt_client_cert">MQTT Client Certificate:</label>
                    <textarea class="mqttform" id="mqtt_client_cert" name="mqtt_client_cert" rows="10" cols="70">{{mqtt_client_cert}}</textarea>
                </div>
                <div class="mqttform">
                    <label for="mqtt_client_key">MQTT Client Private Key:</label>
                    <textarea class="mqttform" id="mqtt_client_key" name="mqtt_client_key" rows="10" cols="70" placeholder="{{'Key stored' if mqtt_client_key_stored else 'Enter key in PEM format'}}"></textarea>
                </div>
                </div>
                <div class="center">
                <input class="button center" type="submit" value="Submit">
                </div>
            </form>
        <h2>Configuration</h2>
        <table id="configtable">
        <tr><td class="cell-highlight">IP Address:</td><td>{{ip_address}}</td></tr>
        <tr><td class="cell-highlight">Subnet Mask:</td><td>{{subnet_mask}}</td></tr>
        <tr><td class="cell-highlight">Gateway:</td><td>{{gateway}}</td></tr>
        <tr><td class="cell-highlight">DNS Server:</td><td>{{dns_server}}</td></tr>
        <tr><td class="cell-highlight">MQTT Server:</td><td>{{mqtt_server}}</td></tr>
        </table>
        <p><button class="button" onclick="window.location.href='/';">Home</button></p>
    </body>
</html>
