<!--
SPDX-FileCopyrightText: 2023 Charles Crighton <code@crighton.net.nz>

SPDX-License-Identifier: GPL-3.0-or-later
-->

<!DOCTYPE html>
<html>
    <head>
        <title>Rockwren</title>
        <link rel="icon" type="image/svg+xml" href="/favicon.svg"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>{{render_template(web_path + "/style.css")}}</style>
        <script>
        function loadLogs() {
          var xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              logtext = document.getElementById("logtext")
              logtext.innerHTML = this.responseText;
              logtext.scrollTop = logtext.scrollHeight
            }
          };
          xhttp.open("GET", "log", true);
          xhttp.send();
        }
        setInterval(loadLogs, 5000)
        </script>
    </head>
    <body  onload="loadLogs()"> <h1>Rockwren</h1>
        <h2>{{device.name}}</h2>
        <h2>Logs</h2>
        <textarea class="logtext" id="logtext" name="logtext" rows="30" cols="120"></textarea>
        <p></p>
        <a href="/log" download="{{device.name}}.txt">Download Logs</a>
        <p></p>
        <p><button class="button" onclick="window.location.href='/';">Home</button></p>
    </body>
</html>
